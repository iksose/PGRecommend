"use strict";var app=angular.module("uiRouterSample",["angular-table"]).run(["$rootScope",function(){}]);angular.module("uiRouterSample").factory("recoFactory",function(e){var t=document.getElementsByClassName("dvCustId")[0].innerText;return{getPurchases:function(){return e.get("/_vti_bin/ProfitguardRecommendationsWCF.svc/GetPurchases/"+t)},getRecommendations:function(){return e.get("/_vti_bin/ProfitguardRecommendationsWCF.svc/GetRecommendations/"+t)}}}),angular.module("uiRouterSample").controller("filters",function(e){e.filters={},$traceurRuntime.setProperty(e.filters,"Primary Wholesaler",{enabled:!1,text:["Endorsed Wholesaler Contract to PBA","Endorsed Wholesaler Non-Contract to Endorsed Wholesaler Contract","Endorsed Wholesaler Contract to Endorsed Wholesaler Contract","Endorsed Wholesaler Non-Contract to PBA"]}),$traceurRuntime.setProperty(e.filters,"From PBA",{enabled:!1,text:["PBA to Endorsed Wholesaler Contract"]}),$traceurRuntime.setProperty(e.filters,"Source",{enabled:!1,text:["Endorsed Wholesaler Contract to PBA","Endorsed Wholesaler Contract to Endorsed Wholesaler Contract","PBA to Endorsed Wholesaler Contract"]}),$traceurRuntime.setProperty(e.filters,"Non Contract",{enabled:!1,text:["Endorsed Wholesaler Non-Contract to Endorsed Wholesaler Contract","Endorsed Wholesaler Non-Contract to PBA"]}),e.filterClick=function(t,n){var r=t,o=document.getElementById(n.target.id);1==e.filters[$traceurRuntime.toProperty(r)].enabled?(e.filters[$traceurRuntime.toProperty(r)].enabled=!1,o.className=n.target.id):(e.filters[$traceurRuntime.toProperty(r)].enabled=!0,o.className+=" "+n.target.id+"Red"),e.ammend()},e.ammend=function(){var t=[],n=!1;for(var r in e.filters)if(e.filters[$traceurRuntime.toProperty(r)].enabled){n=!0,console.log("Filter for",r,"is true, do this");var o=!0,a=t.length>0?t:[],s=t.length>0?t:e.$parent.myPurchases_copy;console.log("Value of jesus on second pass",a.length);for(var l=0;l<e.filters[$traceurRuntime.toProperty(r)].text.length;l++){if(!o){console.log("On second run...",l);var i=_.reject(a,function(t){return t.RecoType==e.filters[$traceurRuntime.toProperty(r)].text[$traceurRuntime.toProperty(l)]});a=i}if(o){console.log("On first run...",l),console.log(s.length);var i=_.reject(s,function(t){return t.RecoType==e.filters[$traceurRuntime.toProperty(r)].text[$traceurRuntime.toProperty(l)]});a=i;var o=!1}}var t=a;console.log("Done with first filter for",r,t),e.$parent.myPurchases=a}n||(console.log("No filters..."),e.$parent.myPurchases=e.$parent.myPurchases_copy),e.$parent.destroy(),setTimeout(function(){e.$parent.ammendment()},100)}}),angular.module("uiRouterSample").controller("TodoCtrl",function(e,t){e.myPurchases={},e.myPurchases_copy={},t.getPurchases().then(function(t){var n=[];t.data.aaData.forEach(function(e){e.TotalSavings=parseFloat(parseFloat(e.TotalSavings).toFixed(2)),e.RecoType_small="PBA to Endorsed Wholesaler Contract"==e.RecoType?"PBA Health":"Primary Wholesaler",n.push(e)}),e.myPurchases=n,e.myPurchases_copy=n,e.pagination[3].shade=n.length}),e.myRecommendations={},t.getRecommendations().then(function(t){var n=[];t.data.aaData.forEach(function(e){e.RecoType="Endorsed Wholesaler Contract to PBA"==e.RecoType?"PBA Health":"Primary Wholesaler",n.push(e)}),e.myRecommendations=n,e.ammendment()}),e.selectChanged=function(t){console.log("select changed",e.tableConfig.itemsPerPage," old ",t.shade," new"),e.tableConfig.oldAmount=e.tableConfig.itemsPerPage,e.tableConfig.itemsPerPage=t.shade,e.destroy(),setTimeout(function(){e.ammendment()},100)},e.pagination=[{name:5,shade:5},{name:10,shade:10},{name:20,shade:20},{name:"All",shade:3}],e.myPagination=e.pagination[0],e.tableConfig={itemsPerPage:e.myPagination.shade,fillLastPage:!1,maxPages:10,oldAmount:e.myPagination.shade},e.tableConfig.currentPage=1,e.$watch("tableConfig.currentPage",function(t,n){t!==n&&(e.destroy(e.tableConfig.itemsPerPage),setTimeout(function(){e.ammendment()},100))}),e.ammendment=function(){for(var t=e.tableConfig.itemsPerPage,n=document.getElementById("queryTable"),r=document.getElementsByClassName("mainRows"),o=0;t>o;o++){var a=n.insertRow(r[$traceurRuntime.toProperty(o)].rowIndex+1);a.id="row"+o,a.insertCell(0).innerHTML="Recommendation",a.cells[0].className="Bubba";var s=_.findWhere(e.myRecommendations,{RowID:r[$traceurRuntime.toProperty(o)].id});a.insertCell(1).innerHTML=s.NDC,a.insertCell(2).innerHTML=s.Descr,a.insertCell(3).innerHTML=s.MfgName,a.insertCell(4).innerHTML=s.Form,a.insertCell(5).innerHTML=s.Str,a.insertCell(6).innerHTML=s.Size,a.insertCell(7).innerHTML="",a.insertCell(8).innerHTML="$"+parseFloat(s.RecSalesPrice).toFixed(2),a.insertCell(9).innerHTML="$"+parseFloat(s.RecTotal).toFixed(2);var l=_.findWhere(e.myPurchases,{RowID:r[$traceurRuntime.toProperty(o)].id});1==l.checked&&(document.getElementById("checkbox"+r[$traceurRuntime.toProperty(o)].id).checked=!0),a.insertCell(10).innerHTML=l.TotalSavings,a.cells[10].className="bold",a.insertCell(11).innerHTML=s.RecoType,a.cells[11].className="bold",a.insertCell(12).innerHTML="$"+l.TotalSavings,a.cells[12].className="bold"}},e.destroy=function(){for(var e=document.getElementById("queryTable"),t=document.getElementsByClassName("mainRows"),n=1;n<=t.length;n++)e.rows[$traceurRuntime.toProperty(n+1)].remove()},e.switchStatus=!1,e.switchStatus2=!0,e.selected=0}),angular.module("uiRouterSample").controller("printCtrl2",function(e,t,n){e.addPrint=function(t,n){if("checkbox"==n.target.type){var r=_.findWhere(e.myPurchases,{RowID:t});return r.checked=document.getElementById("checkbox"+t).checked,void(r.checked?e.selected++:e.selected--)}if(document.getElementById("checkbox"+t).checked){document.getElementById("checkbox"+t).checked=!1;var r=_.findWhere(e.myPurchases,{RowID:t});r.checked=!1,e.selected--}else{document.getElementById("checkbox"+t).checked=!0;var r=_.findWhere(e.myPurchases,{RowID:t});r.checked=!0,e.selected++}},e.printAll=function(){var t=n;t.sessionStorage.purchases=angular.toJson(e.myPurchases),t.sessionStorage.recommendations=angular.toJson(e.myRecommendations),t.sessionStorage.printText="Showing All",t.open("/views/printAll.html")},e.selected=0,e.printSelected=function(){var t=n,r=_.where(e.myPurchases,{checked:!0});t.sessionStorage.purchases=angular.toJson(r),t.sessionStorage.recommendations=angular.toJson(e.myRecommendations),t.sessionStorage.printText="Showing "+r.length+" of "+e.pagination[3].shade,t.open("/views/printAll.html")}}),angular.module("uiRouterSample").controller("print_page_Ctrl",function(e){function t(){for(var t=e.myPurchases.length,n=document.getElementById("queryTable"),r=document.getElementsByClassName("mainRows"),o=0;t>o;o++){var a=n.insertRow(r[$traceurRuntime.toProperty(o)].rowIndex+1);a.id="row"+o,a.insertCell(0).innerHTML="Recommend",a.cells[0].className="Bubba";var s=_.findWhere(e.myRecommendations,{RowID:r[$traceurRuntime.toProperty(o)].id});a.insertCell(1).innerHTML=s.NDC,a.insertCell(2).innerHTML=s.Descr,a.insertCell(3).innerHTML=s.MfgName,a.insertCell(4).innerHTML=s.Form,a.insertCell(5).innerHTML=s.Str,a.insertCell(6).innerHTML=s.Size,a.insertCell(7).innerHTML="",a.insertCell(8).innerHTML="$"+parseFloat(s.RecSalesPrice).toFixed(2),a.insertCell(9).innerHTML="$"+parseFloat(s.RecTotal).toFixed(2);var l=_.findWhere(e.myPurchases,{RowID:r[$traceurRuntime.toProperty(o)].id});a.insertCell(10).innerHTML=l.TotalSavings,a.cells[10].className="bold",a.insertCell(11).innerHTML=s.RecoType,a.cells[11].className="bold",a.insertCell(12).innerHTML="$"+l.TotalSavings,a.cells[12].className="bold"}}console.log("Welcome to the print Controller"),e.printText=sessionStorage.printText,e.myPurchases=JSON.parse(sessionStorage.purchases),e.myRecommendations=JSON.parse(sessionStorage.recommendations),setTimeout(function(){t()},100),setTimeout(function(){window.print()},500),e.colors=[{name:5,shade:5},{name:10,shade:10},{name:20,shade:20},{name:"All",shade:1e3}],e.myColor=e.colors[0],e.tableConfig={itemsPerPage:1e3,fillLastPage:!1,oldAmount:e.myColor.name}});